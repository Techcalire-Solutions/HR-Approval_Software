

<div class="payroll-header">
  <h2>Basic Payroll</h2>
  <div>
    <button class="download-button exclude-from-pdf" mat-raised-button (click)="downloadPDF()">
      <mat-icon>picture_as_pdf</mat-icon>
    </button>
    @if(dialogRef){
      <button class="close-button exclude-from-pdf"  mat-raised-button color="primary" (click)="dialogRef?.close()">
        <mat-icon>close</mat-icon>
      </button>
    }
  
  </div>
</div>
<div class="payroll-container">
    <form [formGroup]="payrollForm">
      <table class="payroll-table">
        <thead>
        <tr>
            <td>Name</td>
            <td colspan="2"><input formControlName="userName" class="input-field" readonly="true"></td>
        </tr>
        <tr>
            <td>Designation</td>
            <td colspan="2"><input formControlName="userRole" class="input-field" readonly="true"></td>
        </tr>
          <tr>
            <th>Salary Component</th>
            <th>Monthly (₹)</th>
            <th>Yearly (₹)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Basic Pay</td>
            <td><input type="number" formControlName="basic" class="input-field"></td>
            <td><input type="number" formControlName="yearbasicPay" class="input-field"></td>
          </tr>
          <tr>
            <td>House Rent Allowance</td>
            <td><input type="number" formControlName="hra" class="input-field"></td>
            <td><input type="number" formControlName="yearhra" class="input-field"></td>
          </tr>
          <tr>
            <td>Conveyance Allowance</td>
            <td><input type="number" formControlName="conveyanceAllowance" class="input-field"></td>
            <td><input type="number" formControlName="yearconveyanceAllowance" class="input-field"></td>
          </tr>
          <tr>
            <td>Leave Travel Allowance</td>
            <td><input type="number" formControlName="lta" class="input-field"></td>
            <td><input type="number" formControlName="yearlta" class="input-field"></td>
          </tr>
          <tr>
            <td>Speacial Allowance</td>
            <td><input type="number" formControlName="specialAllowance" class="input-field"></td>
            <td><input type="number" formControlName="yearspecialAllowance" class="input-field"></td>
          </tr>
          
          <tr style="background-color: #7facc6; font-weight: bold; text-align: center;">
            <td><b>Gross Pay</b></td>
            <td><input type="number" formControlName="grossPay" class="input-field" readonly></td>
            <td><input type="number" formControlName="yeargrossPay" class="input-field" readonly></td>
          </tr>
                  
          <!-- <tr>
            <td>Provident Fund</td>
            <td><input type="number" formControlName="pf" class="input-field"></td>
            <td><input type="number" formControlName="yearpf" class="input-field"></td>
          </tr> -->
          <!-- <tr>
            <td>Insurance</td>
            <td><input type="number" formControlName="insurance" class="input-field"></td>
            <td><input type="number" formControlName="yearinsurance" class="input-field"></td>
          </tr>
          <tr>
            <td>Gratuity</td>
            <td><input type="number" formControlName="gratuity" class="input-field"></td>
            <td><input type="number" formControlName="yearGratuity" class="input-field"></td>
          </tr>
          <tr style="background-color: #7facc6; font-weight: bold; text-align: center;">
            <td><b>Net Pay</b></td>
            <td><input type="number" formControlName="netPay" class="input-field" readonly></td>
            <td><input type="number" formControlName="yearnetPay" class="input-field" readonly></td>
          </tr> -->
          <tr>
            <td>PF Deduction</td>
            <td><input type="number" formControlName="pfDeduction" class="input-field"></td>
            <td><input type="number" formControlName="yearPfDeduction" class="input-field"></td>
          </tr>
          <tr>
            <td>ESI</td>
            <td><input type="number" formControlName="esi" class="input-field"></td>
            <td><input type="number" formControlName="yearEsi" class="input-field"></td>
          </tr>
          
        </tbody>
      </table>
      
    </form>
    <button mat-raised-button class="save-button exclude-from-pdf" (click)="savePayrollDetails()"  [disabled]="!payrollForm.valid">
     @if(editStaus) {Update Payroll}
     @else {Save Payroll}
    </button>
  
    <!-- Payroll summary section -->
    <!-- <div class="payroll-summary"> -->
      
      <!-- <p><strong>Total Deductions:</strong> ₹ {{ netPay - grossPay }}</p>
      <p><strong>Net Pay:</strong> ₹ {{ netPay }}</p> -->
      <!-- <button class="save-button" *ngIf="isPayrollAvailable; else saveButton" (click)="updatePayroll()">
        Update
      </button>
      
      <ng-template #saveButton>
        <button class="save-button" (click)="savePayrollDetails()">Save</button>
      </ng-template> -->
      
    <!-- </div> -->
  </div>
  